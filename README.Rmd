---
title: "Missing Teeth and Heart Disease Revisited: BRFSS 2018"
author: "Paul G. Smith"
date: '`r paste("First created on Nov 5, 2019. Updated on", format(Sys.Date(),"%b %d, %Y"))`'
output: 
  github_document:
    toc: true
    html_preview: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Missing Teeth and Heart Disease Revisited: BRFSS 2018

### Load Dependencies and Read in BRFSS 2018 Data Set


```{r echo=TRUE, message=TRUE, warning=TRUE}
source("100_Dependencies.R", echo = TRUE)
source("105_Read in BRFSS XPT.R", echo = TRUE)
source("110_Keep vars.R", echo = TRUE)

```

### Clean and make additional outcome and exposure variables

```{r echo=TRUE, message=TRUE, warning=TRUE}
source("115_Make outcome exposure vars.R", echo = TRUE)

```

### Clean and make additional confounder variables

```{r echo=TRUE, message=TRUE, warning=TRUE}
source("120_Make sex race vars.R", echo = TRUE)
source("125_Make age  educ income vars.R", echo = TRUE)
source("130_Make dent diabetes smoker vars.R", echo = TRUE)
source("135_Make exer bmi vars.R", echo = TRUE)

```

### Data reduction

Initial input data set from the CDC contained data on 437,436 individuals and included 275 variables (917 MB).

13 variables were selected from this data set for further refinement. Several of these variables were recoded into new variables, and additional indicator variables were made for use in the data analysis (regression) phase. The final data sets included ?? variables.

During data reduction missing data was removed from the data set one by one. This provides a data reduction view of each step.

- The initial data set contained 437,436 rows (917 MB)
- 435,118 rows remained after the removal of missing data on the cardiovascular disease questions (dependent variable).
_ 424,055 rows remained after removing missing data from the tooth loss questions (exposure variable.)
- 261,501 rows remained after missing data from sex, race, and age variables were removed. Also to replicate the orginal study data was retained only for those individuals over 50 years of age.
- 204,042 rows remained in the final data set after removing the missing data from the remaining confounders.

```{r echo=TRUE, message=TRUE, warning=TRUE}
source("175_Data reduction.R", echo = TRUE)

```

### Write out final clean data set

The final data set was written to a file with variable (column) names to speed up further analyses. The individual analyses files will only load the reduced file from this point on.

```{r echo=TRUE, message=TRUE, warning=TRUE}
source("190_Write out data.R", echo = TRUE)

```
